{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<div>
    <!-- Main wrapper  -->
    <div id="main-wrapper">
        {% include 'header.html' %}
        {% include 'left-nav.html' %}
        <!-- Page wrapper  -->
        <div class="page-wrapper">
            <!-- Bread crumb -->
            <div class="row page-titles">
                <div class="col-md-5 align-self-center">
                    <h3 class="text-primary">System Modules</h3>
                </div>
                <div class="col-md-7 align-self-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="javascript:void(0)">Home</a></li>
                        <li class="breadcrumb-item active">System Modules</li>
                    </ol>
                </div>
            </div>
            <!-- End Bread crumb -->
            <!-- Container fluid  -->
            <div class="container-fluid">
                <!-- Start Page Content -->
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <label class="col-md-4" for=""><strong>Select App</strong></label>
                            <div class="form-group col-md-4">
                                <select name="app" class="select form-control" id="app_label_select_id"
                                        onchange="funtFilterByApp()">

                                    <option value="0" selected>-----Filter by App----</option>
                                    {% for app in module_apps %}
                                    <option value="{{ app.app_label }}">{{ app.app_label }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                            <div class="card-body module_data_class">
                                <div class="table-responsive">

                                    <table id="table_system_modules2" class="display nowrap table table-hover"
                                           cellspacing="0" width="100%">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Module Name</th>
                                            <th>App Label</th>
                                            <th class="text-center">Permissions</th>
                                            <th class="text-center">Manage</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        {% for mod in list_modules %}
                                        <tr class="model_row_class" data-modelid="{{ mod.id }}">
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ mod.model }}</td>

                                            <td>{{ mod.app_label }}</td>
                                            <td class="text-center">
                                                <span id="model_id{{ mod.id }}" class="badge badge-pill badge-success">{{ mod.count_permissions }}</span>
                                            </td>
                                            <td class="text-center">
                                                <button onclick="functionManageSystemModule({{ mod.id }}, '{{ mod.model }}')"
                                                        id="" class="btn btn-outline-success btn-sm"
                                                        type="button">
                                                    <i title="Manage Module" class="fa fa-dedent"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        {% include 'footer.html' %}
                        <!-- End Page Content -->
                    </div>
                    <!-- End Container fluid  -->
                </div>
                <!-- End Page wrapper  -->
            </div>
        </div>
    </div>
</div>
{% endblock %}
