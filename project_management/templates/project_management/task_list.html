{% extends 'base.html' %}

{% load static %}

{% block content %}
<!-- Main wrapper  -->
<div id="main-wrapper">
    <!-- header header  -->
    {% include 'header.html' %}
    <!-- End header header -->
    {% include 'left-nav.html' %}
    <!-- Page wrapper  -->
    <div class="page-wrapper">
        <!-- Bread crumb -->
        <div class="row page-titles">
            <div class="col-md-5 align-self-center">
                <h3 class="text-primary">Tasks</h3>
            </div>
            <div class="col-md-7 align-self-center">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'home' %}">Home</a></li>
                    <li class="breadcrumb-item active">List of Tasks</li>
                </ol>
            </div>
        </div>
        <!-- End Bread crumb -->
        <!-- Container fluid  -->
        <div class="container-fluid">
            <!-- Start Page Content -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-title">
                                <div class="row">
                                    <div class="col-10">
                                        <h4 class="card-title">Tasks</h4>
                                    </div>
    
                                    <div class="col-2">
                                        <button id="" class="btn btn-info pull-right" onclick="functAddTask();">
                                            <i class="fa fa-fw fa-lg fa-plus"></i>Add Tasks
                                        </button>
                                    </div>
                                </div>
                                <br />
                            </div>
                        <div class="card-body tasks-users">
                            <div class="table-responsive">
                                <table class="table table-hover" id="table_priorities">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Project</th>
                                            <th>Start-Date</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        {% for task in tasks %}
                                        <tr>
                                            <td><a href="{% url 'task_details' task.id %}">{{ task.name }}</a></td>
                                            <td>{{ task.project }}</td>
                                            <td>{{ task.end_date }}</td>
                                            <td>{{ task.status }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% include 'footer.html' %}
            <!-- End PAge Content -->
        </div>
        <!-- End Container fluid  -->
    </div>
    <!-- End Page wrapper  -->
</div>
<script>
    function functAddTask(){
        urldata = "{% url 'createTask' %}";
        
        $.ajax({
            type: 'GET',
            cache: false,
            data: {},
            url: urldata,
            success: function (resp) {
                $.confirm({
                    title: '<h3>Add Task</h3>',
                    content: '' + resp,
                    type: 'blue',
                    theme: 'material',
                    typeAnimated: true,
                    boxWidth: '60%',
                    useBootstrap: false,
                    closeIcon: true,
                    buttons: {
                        close: {
                            text: 'Close',
                            btnClass: 'btn-gray close-dialog',
                            action: function () {
                            }
                        }
                    }
                });
            }
        });

        
    }
</script>
{% endblock %}